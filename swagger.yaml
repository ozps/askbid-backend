swagger: '2.0'
info:
    description: API for using in AskBid project
    version: 1.0.0
    title: AskBid API
host: localhost:5000
tags:
    - name: item
      description: Everything about Item
    - name: user
      description: Operations about User
schemes:
    - http
    - https
securityDefinitions: # Bearer xxxxxx.yyyyyyy.zzzzzz
    Bearer:
        type: apiKey
        name: Authorization
        in: header
paths:
    /item/get_all_items:
        get:
            tags:
                - item
            summary: Get all items
            description: Returns items sorted by name
            operationId: getAllItems
            produces:
                - application/json
            parameters: []
            responses:
                200:
                    description: successful operation
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
                            result:
                                type: array
                                items:
                                    $ref: '#/definitions/item'
    /item/get_new_items:
        get:
            tags:
                - item
            summary: Get all items
            description: Returns items sorted by released date
            operationId: getNewItems
            produces:
                - application/json
            parameters: []
            responses:
                200:
                    description: successful operation
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
                            result:
                                type: array
                                items:
                                    $ref: '#/definitions/item'
    /item/get_popular_items:
        get:
            tags:
                - item
            summary: Get all items
            description: Returns items sorted by popularity
            operationId: getPopularItems
            produces:
                - application/json
            parameters: []
            responses:
                200:
                    description: successful operation
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
                            result:
                                type: array
                                items:
                                    $ref: '#/definitions/item'
    /item/get_item/{id}:
        get:
            tags:
                - item
            summary: Get detail of an item
            description: Returns a single item
            operationId: getItem
            produces:
                - application/json
            parameters:
                - name: id
                  in: path
                  description: ID of item to return
                  required: true
                  type: integer
                  format: int64
            responses:
                200:
                    description: successful operation
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
                            result:
                                type: array
                                items:
                                    $ref: '#/definitions/item'
    /item/search_items:
        post:
            tags:
                - item
            summary: Search for items
            description: Returns all the matching items
            operationId: searchItems
            produces:
                - application/json
            parameters:
                - name: state
                  in: body
                  description: Some details of items
                  type: object
                  properties:
                      detail:
                          type: string
            responses:
                200:
                    description: successful operation
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
                            result:
                                type: array
                                items:
                                    $ref: '#/definitions/item'
    /user/sign_up:
        post:
            tags:
                - user
            summary: Sign Up
            description: Users want to sign up
            operationId: signUp
            produces:
                - application/json
            parameters:
                - name: state
                  in: body
                  description: Information of a user
                  type: object
                  properties:
                      fullName:
                          type: string
                      cardNo:
                          type: string
                      email:
                          type: string
                      password:
                          type: string
            responses:
                200:
                    description: successful operation
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
                409:
                    description: The request could not be completed due to a conflict with the current state.
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
    /user/sign_in:
        post:
            tags:
                - user
            summary: Sign In
            description: Users want to sign in
            operationId: signIn
            produces:
                - application/json
            parameters:
                - name: state
                  in: body
                  description: Information of a user
                  type: object
                  properties:
                      email:
                          type: string
                      password:
                          type: string
            responses:
                200:
                    description: successful operation
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
                            token:
                                type: string
                            userID:
                                type: integer
                            level:
                                type: integer
                401:
                    description: Authorization information is missing or invalid.
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
    /user/get_profile:
        post:
            security:
                - Bearer: []
            tags:
                - user
            summary: Get Profile
            description: Users want to get profile
            operationId: getProfile
            produces:
                - application/json
            parameters:
                - name: state
                  in: body
                  description: ID of user to return
                  type: object
                  properties:
                      userId:
                          type: integer
            responses:
                200:
                    description: successful operation
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
                            result: { $ref: '#/definitions/user' }

                403:
                    description: Forbidden.
                    schema:
                        type: object
                        properties:
                            status:
                                type: string
    /user/update_profile:
        post:
            security:
                - Bearer: []
            tags:
                - user
            summary: Update Profile
            description: Users want to update profile
            operationId: updateProfile
            produces:
                - application/json
            parameters:
                - name: state
                  in: body
                  description: Information of a user
                  type: object
                  properties:
                      fullName:
                          type: string
                      address:
                          type: string
                      telNo:
                          type: string
                      balance:
                          type: number
                      bankNo:
                          type: string
                      userId:
                          type: integer
                          format: int64
            responses:
                200:
                    description: successful operation
                    schema:
                        type: object
                        properties:
                            status:
                                type: string

definitions:
    item:
        type: object
        properties:
            id:
                type: integer
                format: int64
            brand:
                type: string
                description: Brand of an item
            desc:
                type: string
                description: Description of an item
            color:
                type: string
                description: Color of an item
            released_date:
                type: string
                format: date-time
                description: Released date of an item
            image:
                type: string
                description: Image path of an item
            visited_count:
                type: integer
                format: int64
                description: Visited count of an item
    user:
        type: object
        properties:
            id:
                type: integer
                format: int64
            full_name:
                type: string
                description: Full name of a user
            card_no:
                type: string
                description: ID card number of a user
            email:
                type: string
                description: Email of a user
            password:
                type: string
                description: Password of a user
            address:
                type: string
                description: Address of a user
            tel_no:
                type: string
                description: Telephone number of a user
            balance:
                type: number
                description: Balance of a user
            bank_no:
                type: string
                description: Bank account number of a user
            avatar_image:
                type: string
                description: Avatar image path of an user
            card_image:
                type: string
                description: Card image path of an user
            level:
                type: integer
                format: int32
                description: Level of a user
